!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.toStringTag||"@@toStringTag";function a(t,i,o,u){var a=i&&i.prototype instanceof c?i:c,s=Object.create(a.prototype);return e(s,"_invoke",function(t,e,i){var o,u,a,c=0,s=i||[],f=!1,p={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,e){return o=t,u=0,a=n,p.n=e,l}};function v(t,e){for(u=t,a=e,r=0;!f&&c&&!i&&r<s.length;r++){var i,o=s[r],v=p.p,b=o[2];t>3?(i=b===e)&&(a=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=n):o[0]<=v&&((i=t<2&&v<o[1])?(u=0,p.v=e,p.n=o[1]):v<b&&(i=t<3||o[0]>e||e>b)&&(o[4]=t,o[5]=e,p.n=b,u=0))}if(i||t>1)return l;throw f=!0,e}return function(i,s,b){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,b),u=s,a=b;(r=u<2?n:a)||!f;){o||(u?u<3?(u>1&&(p.n=-1),v(u,a)):p.n=a:p.v=a);try{if(c=2,o){if(u||(i="next"),r=o[i]){if(!(r=r.call(o,a)))throw TypeError("iterator result is not an object");if(!r.done)return r;a=r.value,u<2&&(u=0)}else 1===u&&(r=o.return)&&r.call(o),u<2&&(a=TypeError("The iterator does not provide a '"+i+"' method"),u=1);o=n}else if((r=(f=p.n<0)?a:t.call(e,p))!==l)break}catch(r){o=n,u=1,a=r}finally{c=1}}return{value:r,done:f}}}(t,o,u),!0),s}var l={};function c(){}function s(){}function f(){}r=Object.getPrototypeOf;var p=[][o]?r(r([][o]())):(e(r={},o,function(){return this}),r),v=f.prototype=c.prototype=Object.create(p);function b(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,u,"GeneratorFunction")),t.prototype=Object.create(v),t}return s.prototype=f,e(v,"constructor",f),e(f,"constructor",s),s.displayName="GeneratorFunction",e(f,u,"GeneratorFunction"),e(v),e(v,u,"Generator"),e(v,o,function(){return this}),e(v,"toString",function(){return"[object Generator]"}),(t=function(){return{w:a,m:b}})()}function e(t,n,r,i){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}e=function(t,n,r,i){function u(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?o?o(t,n,{value:r,enumerable:!i,configurable:!i,writable:!i}):t[n]=r:(u("next",0),u("throw",1),u("return",2))},e(t,n,r,i)}function n(t,e,n,r,i,o,u){try{var a=t[o](u),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise(function(i,o){var u=t.apply(e,r);function a(t){n(u,i,o,a,l,"next",t)}function l(t){n(u,i,o,a,l,"throw",t)}a(void 0)})}}System.register(["./chunk-legacy-CdndQ8Vt.js","./chunk-legacy-fbGsbElz.js","./chunk-legacy-BsnX1aX7.js","./chunk-legacy-sLYc4Dyh.js","./chunk-legacy-Z6zAF711.js"],function(e,n){"use strict";var i,o,u,a,l,c,s,f,p,v,b,d,y,m,h,g,k,w,x,_,j,C,O,S,T,M,F;return{setters:[function(t){i=t.d,o=t.l,u=t.a4,a=t.r,l=t.u,c=t.w,s=t.c,f=t.z,p=t.K,v=t.o,b=t.R,d=t.h,y=t.b,m=t.g,h=t.T,g=t.Y,k=t.v,w=t.x,x=t.a,_=t.n,j=t.V,C=t.W,O=t.i},function(t){S=t._},function(t){T=t.u,M=t.b},function(t){F=t._},null],execute:function(){var n={class:"flex flex-col items-center gap-6 w-full px-12"},G=["disabled"],N=i({__name:"UploadDialog",props:{visible:{type:Boolean,required:!0},visibleModifiers:{}},emits:["update:visible"],setup:function(e){var i=o().t,w=u.useToast(),x=a("audio/*"),_=l(e,"visible"),j=T().globalConfig,C=c.createInstance({name:"audioStore"}),O=a(null),S=s({get:function(){var t;return(null===(t=O.value)||void 0===t?void 0:t.fileName)||null},set:function(t){O.value&&t&&(O.value.fileName=t)}}),N=a();function P(t){return U.apply(this,arguments)}function U(){return(U=r(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}return O.value=null,t.a(2);case 1:if(/audio*/.test((null==n?void 0:n.type)||"")){t.n=2;break}return w.open({message:i("error.notAudioFile"),type:"error",position:"top-right"}),t.a(2);case 2:O.value=n;case 3:return t.a(2)}},e)}))).apply(this,arguments)}function D(){return(D=r(t().m(function e(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,C.keys();case 1:t.v.length>0&&C.iterate(function(t,e){j.addMusic({id:e,name:t.fileName,url:"Storage"})});case 2:return t.a(2)}},e)}))).apply(this,arguments)}function I(){if(O.value){var t=O.value,e=t.data,n=t.fileName,r=k();C.setItem(r,{data:e,fileName:n}).then(function(){w.open({message:i("error.uploadSuccess"),type:"success",position:"top-right"}),function(){D.apply(this,arguments)}()}).catch(function(){w.open({message:i("error.uploadFail"),type:"error",position:"top-right"})})}}return f(_,function(t){t&&N.value.showDialog()}),function(t,e){return v(),p(M,{ref_key:"uploadDialogRef",ref:N,visible:_.value,"onUpdate:visible":e[1]||(e[1]=function(t){return _.value=t}),title:d(i)("dialog.uploadAudioTitle"),"submit-func":I,class:""},{content:b(function(){return[y("div",n,[_.value?(v(),p(F,{key:0,"limit-type":x.value,onUploadFile:P},null,8,["limit-type"])):m("",!0),h(y("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return S.value=t}),disabled:null===O.value,type:"text",class:"input w-full"},null,8,G),[[g,S.value]])])]}),_:1},8,["visible","title"])}}}),P={class:"flex gap-3"},U={for:"explore"},D={class:"p-0"},I=["title"],E={class:"link hover:text-primary"},L={class:"flex gap-3"},A=["onClick"],R=["onClick"];e("default",i({__name:"index",setup:function(e){var n=o().t,i=c.createInstance({name:"audioStore"}),u=T().globalConfig,l=w(u).getMusicList,s=a(l),f=a(!1);function p(){return(p=r(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:u.setCurrentMusic(n,!1);case 1:return t.a(2)}},e)}))).apply(this,arguments)}function m(){u.resetMusicList(),i.clear()}function h(){u.clearMusicList(),i.clear()}return function(t,e){return v(),x(j,null,[_(N,{visible:f.value,"onUpdate:visible":e[0]||(e[0]=function(t){return f.value=t})},null,8,["visible"]),y("div",null,[_(S,{title:d(n)("sidebar.musicManagement")},{buttons:b(function(){return[y("div",P,[y("button",{class:"btn btn-primary btn-sm",onClick:m},O(d(n)("button.reset")),1),y("label",U,[y("span",{class:"btn btn-primary btn-sm",onClick:e[1]||(e[1]=function(t){return f.value=!0})},O(d(n)("button.upload")),1)]),y("button",{class:"btn btn-error btn-sm",onClick:h},O(d(n)("button.allDelete")),1)])]}),_:1},8,["title"]),y("div",null,[y("ul",D,[(v(!0),x(j,null,C(s.value,function(t){return v(),x("li",{key:t.id,class:"flex items-center gap-6 pb-2 mb-3"},[y("div",{class:"mr-12 overflow-hidden w-72 whitespace-nowrap text-ellipsis",title:t.name},[y("a",E,O(t.name),1)],8,I),y("div",L,[y("button",{class:"btn btn-primary btn-xs",onClick:function(e){return function(t){return p.apply(this,arguments)}(t)}},O(d(n)("button.play")),9,A),y("button",{class:"btn btn-error btn-xs",onClick:function(e){return function(t){u.removeMusic(t.id),i.removeItem(t.name)}(t)}},O(d(n)("button.delete")),9,R)])])}),128))])])])],64)}}}))}}})}();
