!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.toStringTag||"@@toStringTag";function u(e,i,o,a){var u=i&&i.prototype instanceof c?i:c,s=Object.create(u.prototype);return t(s,"_invoke",function(e,t,i){var o,a,u,c=0,s=i||[],f=!1,v={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return o=e,a=0,u=n,v.n=t,l}};function p(e,t){for(a=e,u=t,r=0;!f&&c&&!i&&r<s.length;r++){var i,o=s[r],p=v.p,d=o[2];e>3?(i=d===t)&&(u=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=n):o[0]<=p&&((i=e<2&&p<o[1])?(a=0,v.v=t,v.n=o[1]):p<d&&(i=e<3||o[0]>t||t>d)&&(o[4]=e,o[5]=t,v.n=d,a=0))}if(i||e>1)return l;throw f=!0,t}return function(i,s,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,d),a=s,u=d;(r=a<2?n:u)||!f;){o||(a?a<3?(a>1&&(v.n=-1),p(a,u)):v.n=u:v.v=u);try{if(c=2,o){if(a||(i="next"),r=o[i]){if(!(r=r.call(o,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,a<2&&(a=0)}else 1===a&&(r=o.return)&&r.call(o),a<2&&(u=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=n}else if((r=(f=v.n<0)?u:e.call(t,v))!==l)break}catch(r){o=n,a=1,u=r}finally{c=1}}return{value:r,done:f}}}(e,o,a),!0),s}var l={};function c(){}function s(){}function f(){}r=Object.getPrototypeOf;var v=[][o]?r(r([][o]())):(t(r={},o,function(){return this}),r),p=f.prototype=c.prototype=Object.create(v);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,t(p,"constructor",f),t(f,"constructor",s),s.displayName="GeneratorFunction",t(f,a,"GeneratorFunction"),t(p),t(p,a,"Generator"),t(p,o,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:u,m:d}})()}function t(e,n,r,i){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}t=function(e,n,r,i){function a(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?o?o(e,n,{value:r,enumerable:!i,configurable:!i,writable:!i}):e[n]=r:(a("next",0),a("throw",1),a("return",2))},t(e,n,r,i)}function n(e,t,n,r,i,o,a){try{var u=e[o](a),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=e.apply(t,r);function u(e){n(a,i,o,u,l,"next",e)}function l(e){n(a,i,o,u,l,"throw",e)}u(void 0)})}}System.register(["./chunk-legacy-CdndQ8Vt.js","./chunk-legacy-Q-yyHZlq.js","./chunk-legacy-fbGsbElz.js","./chunk-legacy-sLYc4Dyh.js","./chunk-legacy-Z6zAF711.js"],function(t,n){"use strict";var i,o,a,u,l,c,s,f,v,p,d,m,b,g,y,h,k,w,_,j,x,S,I,O,T,N,G;return{setters:[function(e){i=e.d,o=e.l,a=e.r,u=e.u,l=e.w,c=e.c,s=e.z,f=e.a,v=e.o,p=e.V,d=e.b,m=e.n,b=e.g,g=e.i,y=e.h,h=e.R,k=e.v,w=e.K,_=e.T,j=e.Y,x=e.x,S=e.W},function(e){I=e.u,O=e.b,T=e.f},function(e){N=e._},function(e){G=e._},null],execute:function(){var n={class:"toast toast-top toast-end"},P={key:0,class:"alert alert-error"},C={key:1,class:"alert alert-success"},F={key:2,class:"alert alert-error"},U={class:"flex flex-col items-center gap-6 w-full px-12"},D=["disabled","placeholder"],E=i({__name:"UploadDialog",props:{visible:{type:Boolean,required:!0},visibleModifiers:{}},emits:["update:visible"],setup:function(t){var i=o().t,x=a("image/*,video/*"),S=a(0),T=u(t,"visible"),N=I().globalConfig,E=l.createInstance({name:"imgStore"}),q=a(null),M=c({get:function(){var e;return(null===(e=q.value)||void 0===e?void 0:e.fileName)||null},set:function(e){q.value&&e&&(q.value.fileName=e)}}),R=a();function V(e){return z.apply(this,arguments)}function z(){return(z=r(e().m(function t(n){var r,i;return e().w(function(e){for(;;)switch(e.n){case 0:if(n){e.n=1;break}return q.value=null,e.a(2);case 1:if(r=/image*/.test((null==n?void 0:n.type)||""),i=/video*/.test((null==n?void 0:n.type)||""),r||i){e.n=2;break}return S.value=3,e.a(2);case 2:q.value=n;case 3:return e.a(2)}},t)}))).apply(this,arguments)}function B(){return(B=r(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E.keys();case 1:e.v.length>0&&E.iterate(function(e,t){N.addImage({id:t,name:e.fileName,url:"Storage"})});case 2:return e.a(2)}},t)}))).apply(this,arguments)}function H(){if(q.value){var e=q.value,t=e.data,n=e.fileName,r=k();E.setItem(r,{data:t,fileName:n}).then(function(){S.value=1,function(){B.apply(this,arguments)}()}).catch(function(){S.value=2})}}return s(T,function(e){e&&R.value.showDialog()}),function(e,t){return v(),f(p,null,[d("div",n,[2===S.value?(v(),f("div",P,[d("span",null,g(y(i)("error.uploadFail")),1)])):b("",!0),1===S.value?(v(),f("div",C,[d("span",null,g(y(i)("error.uploadSuccess")),1)])):b("",!0),3===S.value?(v(),f("div",F,[d("span",null,g(y(i)("error.notImage")),1)])):b("",!0)]),m(O,{ref_key:"uploadDialogRef",ref:R,visible:T.value,"onUpdate:visible":t[1]||(t[1]=function(e){return T.value=e}),title:y(i)("dialog.uploadImageTitle"),"submit-func":H,class:""},{content:h(function(){return[d("div",U,[T.value?(v(),w(G,{key:0,"limit-type":x.value,onUploadFile:V},null,8,["limit-type"])):b("",!0),_(d("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return M.value=e}),disabled:null===q.value,type:"text",placeholder:y(i)("placeHolder.imageName"),class:"input w-full"},null,8,D),[[j,M.value]])])]}),_:1},8,["visible","title"])],64)}}}),q={class:""},M={for:"explore"},R={class:"p-0"},V={class:"flex items-center gap-8"},z={class:"avatar h-14"},B={class:"w-12 h-12 mask mask-squircle hover:w-14 hover:h-14"},H={class:"w-64"},K={class:"overflow-hidden font-bold whitespace-nowrap text-ellipsis"},L=["onClick"];t("default",i({__name:"index",setup:function(e){var t=o().t,n=I().globalConfig,r=x(n).getImageList,i=a(0),u=l.createInstance({name:"imgStore"}),c=a(!1);return s(function(){return i.value},function(e){0!==e&&setTimeout(function(){i.value=0},2e3)}),function(e,i){return v(),f(p,null,[m(E,{visible:c.value,"onUpdate:visible":i[0]||(i[0]=function(e){return c.value=e})},null,8,["visible"]),d("div",null,[m(N,{title:y(t)("sidebar.imagesManagement")},{buttons:h(function(){return[d("div",q,[d("label",M,[d("span",{class:"btn btn-primary btn-sm",onClick:i[1]||(i[1]=function(e){return c.value=!0})},g(y(t)("button.upload")),1)])])]}),_:1},8,["title"]),d("ul",R,[(v(!0),f(p,null,S(y(r),function(e){return v(),f("li",{key:e.id,class:"mb-3"},[d("div",V,[d("div",z,[d("div",B,[m(T,{"img-item":e},null,8,["img-item"])])]),d("div",H,[d("div",K,g(e.name),1)]),d("div",null,[d("button",{class:"btn btn-error btn-xs",onClick:function(t){return function(e){"Storage"===e.url&&u.removeItem(e.id).then(function(){n.removeImage(e.id)}),n.removeImage(e.id)}(e)}},g(y(t)("button.delete")),9,L)])])])}),128))])])],64)}}}))}}})}();
