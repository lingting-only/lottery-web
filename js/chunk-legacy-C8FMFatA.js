!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,l,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function u(e,o,a,r){var u=o&&o.prototype instanceof i?o:i,c=Object.create(u.prototype);return t(c,"_invoke",function(e,t,o){var a,r,u,i=0,c=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return a=e,r=0,u=n,f.n=t,s}};function p(e,t){for(r=e,u=t,l=0;!d&&i&&!o&&l<c.length;l++){var o,a=c[l],p=f.p,b=a[2];e>3?(o=b===t)&&(u=a[(r=a[4])?5:(r=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=e<2&&p<a[1])?(r=0,f.v=t,f.n=a[1]):p<b&&(o=e<3||a[0]>t||t>b)&&(a[4]=e,a[5]=t,f.n=b,r=0))}if(o||e>1)return s;throw d=!0,t}return function(o,c,b){if(i>1)throw TypeError("Generator is already running");for(d&&1===c&&p(c,b),r=c,u=b;(l=r<2?n:u)||!d;){a||(r?r<3?(r>1&&(f.n=-1),p(r,u)):f.n=u:f.v=u);try{if(i=2,a){if(r||(o="next"),l=a[o]){if(!(l=l.call(a,u)))throw TypeError("iterator result is not an object");if(!l.done)return l;u=l.value,r<2&&(r=0)}else 1===r&&(l=a.return)&&l.call(a),r<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),r=1);a=n}else if((l=(d=f.n<0)?u:e.call(t,f))!==s)break}catch(l){a=n,r=1,u=l}finally{i=1}}return{value:l,done:d}}}(e,a,r),!0),c}var s={};function i(){}function c(){}function d(){}l=Object.getPrototypeOf;var f=[][a]?l(l([][a]())):(t(l={},a,function(){return this}),l),p=d.prototype=i.prototype=Object.create(f);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,r,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=d,t(p,"constructor",d),t(d,"constructor",c),c.displayName="GeneratorFunction",t(d,r,"GeneratorFunction"),t(p),t(p,r,"Generator"),t(p,a,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:u,m:b}})()}function t(e,n,l,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,n,l,o){function r(n,l){t(e,n,function(e){return this._invoke(n,l,e)})}n?a?a(e,n,{value:l,enumerable:!o,configurable:!o,writable:!o}):e[n]=l:(r("next",0),r("throw",1),r("return",2))},t(e,n,l,o)}function n(e,t,n,l,o,a,r){try{var u=e[a](r),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(l,o)}function l(e){return function(){var t=this,l=arguments;return new Promise(function(o,a){var r=e.apply(t,l);function u(e){n(r,o,a,u,s,"next",e)}function s(e){n(r,o,a,u,s,"throw",e)}u(void 0)})}}System.register(["./chunk-legacy-CdndQ8Vt.js","./chunk-legacy-Q-yyHZlq.js","./chunk-legacy-fbGsbElz.js"],function(t,n){"use strict";var o,a,r,u,s,i,c,d,f,p,b,m,v,h,g,x,y,w,C,k,P,z,U,j,L,S,D,_,O,T,V;return{setters:[function(e){o=e.a4,a=e.w,r=e.x,u=e.r,s=e.aq,i=e.f,c=e.z,d=e.d,f=e.l,p=e.a,b=e.o,m=e.n,v=e.R,h=e.h,g=e._,x=e.ar,y=e.b,w=e.i,C=e.V,k=e.W,P=e.N,z=e.g,U=e.as,j=e.T,L=e.Y,S=e.Z,D=e.L},function(e){_=e.u,O=e.i,T=e.d},function(e){V=e._}],execute:function(){function n(){var t=o.useToast(),n=a.createInstance({name:"imgStore"}),d=_().prizeConfig,f=_().globalConfig,p=r(d),b=p.getPrizeConfig,m=p.getCurrentPrize,v=r(f).getImageList,h=u([]),g=u(s(b.value)),x=u();function y(){return(y=l(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n.keys();case 1:e.v.length>0&&n.iterate(function(e,t){h.value.push({key:t,value:e})});case 2:return e.a(2)}},t)}))).apply(this,arguments)}function w(){return(w=l(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:g.value=[],t.success(O.global.t("error.success"));case 1:return e.a(2)}},n)}))).apply(this,arguments)}return i(function(){!function(){y.apply(this,arguments)}()}),c(function(){return g.value},function(e){d.setPrizeConfig(e)},{deep:!0}),{addPrize:function(){var e={id:(new Date).getTime().toString(),name:O.global.t("data.prizeName"),sort:0,isAll:!1,count:1,isUsedCount:0,picture:{id:"",name:"",url:""},separateCount:{enable:!1,countList:[]},desc:"",isUsed:!1,isShow:!0,frequency:1};g.value.push(e),t.success(O.global.t("error.success"))},resetDefault:function(){d.resetDefault(),g.value=s(b.value),t.success(O.global.t("error.success"))},delAll:function(){return w.apply(this,arguments)},delItem:function(e){d.deletePrizeConfig(e.id),t.success(O.global.t("error.deleteSuccess"))},prizeList:g,currentPrize:m,selectedPrize:x,submitData:function(e){x.value.separateCount.countList=e,x.value=null},changePrizePerson:function(e){for(var t=-1,n=0;n<g.value.length;n++)if(g.value[n].id===e.id){t=n;break}t>-1&&(g.value[t].separateCount.countList=[],g.value[t].isUsed?g.value[t].isUsedCount=g.value[t].count:g.value[t].isUsedCount=0)},changePrizeStatus:function(e){e.isUsed?e.isUsedCount=0:e.isUsedCount=e.count,e.separateCount.countList=[],e.isUsed=!e.isUsed},selectPrize:function(e){x.value=e,x.value.isUsedCount=0,x.value.isUsed=!1,x.value.separateCount.countList.length>1||(x.value.separateCount={enable:!0,countList:[{id:"0",count:e.count,isUsedCount:0}]})},localImageList:v}}var A={class:"flex w-full gap-3"},G={role:"alert",class:"w-full my-4 alert alert-info"},I={class:"flex items-center justify-center max-w-xs px-2 handle form-control"},N={class:"w-1/2 max-w-xs form-control"},E={class:"label"},F={class:"label-text"},M=["onUpdate:modelValue","placeholder"],q={class:"flex items-center w-1/2 max-w-xs gap-2 form-control"},H={class:"label"},R={class:"label-text"},B=["checked","onChange"],W={class:"w-1/2 max-w-xs form-control"},Y={class:"label"},Z={class:"label-text"},J=["onUpdate:modelValue","placeholder","onChange"],K=["data-tip"],Q=["value","max"],X={class:"flex items-center w-1/2 max-w-xs gap-2 form-control"},$={class:"label"},ee={class:"label-text"},te=["checked","onChange"],ne={class:"w-full max-w-xs form-control"},le={class:"label"},oe={class:"label-text"},ae=["onUpdate:modelValue"],re={key:0,value:{id:"",name:"",url:""}},ue={disabled:"",selected:""},se=["title","value"],ie={class:"truncate w-option-xs"},ce={key:0,class:"w-full max-w-xs form-control"},de={class:"label"},fe={class:"label-text"},pe=["onClick"],be={key:0,class:"flex flex-wrap w-full h-full gap-1 p-0 pt-1 m-0 cursor-pointer"},me=["data-tip"],ve={key:1,class:"btn btn-secondary btn-xs"},he={class:"w-full max-w-xs form-control"},ge={class:"label"},xe={class:"label-text"},ye={class:"flex gap-2"},we=["onClick"];t("default",d({__name:"PrizeConfig",setup:function(e){var t=n(),l=t.addPrize,o=t.resetDefault,a=t.delAll,r=t.delItem,u=t.prizeList,s=t.currentPrize,i=t.selectedPrize,c=t.submitData,d=t.changePrizePerson,_=t.changePrizeStatus,O=t.selectPrize,Ce=t.localImageList,ke=f().t;return function(e,t){var n,f;return b(),p("div",null,[m(V,{title:h(ke)("viewTitle.prizeManagement")},{buttons:v(function(){return[y("div",A,[y("button",{class:"btn btn-info btn-sm",onClick:t[0]||(t[0]=function(){return h(l)&&h(l).apply(void 0,arguments)})},w(h(ke)("button.add")),1),y("button",{class:"btn btn-info btn-sm",onClick:t[1]||(t[1]=function(){return h(o)&&h(o).apply(void 0,arguments)})},w(h(ke)("button.resetDefault")),1),y("button",{class:"btn btn-error btn-sm",onClick:t[2]||(t[2]=function(){return h(a)&&h(a).apply(void 0,arguments)})},w(h(ke)("button.allDelete")),1)])]}),alerts:v(function(){return[y("div",G,[t[4]||(t[4]=y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"w-6 h-6 stroke-current shrink-0"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),y("span",null,w(h(ke)("dialog.tipResetPrize")),1)])]}),_:1},8,["title"]),m(h(x),{modelValue:h(u),"onUpdate:modelValue":t[3]||(t[3]=function(e){return g(u)?u.value=e:null}),animation:150,handle:".handle",class:"p-0 m-0"},{default:v(function(){return[(b(!0),p(C,null,k(h(u),function(e){return b(),p("div",{key:e.id,class:P(["flex items-center justify-center gap-10 py-5",h(s).id===e.id?"border border-dotted rounded-xl":null])},[y("label",I,[m(h(U),{class:"w-10 h-10 cursor-move handle"})]),y("label",N,[y("div",E,[y("span",F,w(h(ke)("table.prizeName")),1)]),j(y("input",{"onUpdate:modelValue":function(t){return e.name=t},type:"text",placeholder:h(ke)("placeHolder.name"),class:"w-full max-w-xs input-sm input input-bordered"},null,8,M),[[L,e.name]])]),y("label",q,[y("div",H,[y("span",R,w(h(ke)("table.fullParticipation")),1)]),y("input",{type:"checkbox",checked:e.isAll,class:"border-solid checkbox checkbox-secondary border",onChange:function(t){return e.isAll=!e.isAll}},null,40,B)]),y("label",W,[y("div",Y,[y("span",Z,w(h(ke)("table.numberParticipants")),1)]),j(y("input",{"onUpdate:modelValue":function(t){return e.count=t},type:"number",placeholder:h(ke)("placeHolder.winnerCount"),class:"w-full max-w-xs p-0 m-0 input-sm input input-bordered",onChange:function(t){return h(d)(e)}},null,40,J),[[L,e.count]]),y("div",{class:"tooltip tooltip-bottom","data-tip":"".concat(h(ke)("table.isDone")+e.isUsedCount,"/").concat(e.count)},[y("progress",{class:"w-full progress",value:e.isUsedCount,max:e.count},null,8,Q)],8,K)]),y("label",X,[y("div",$,[y("span",ee,w(h(ke)("table.isDone")),1)]),y("input",{type:"checkbox",checked:e.isUsed,class:"border-solid checkbox checkbox-secondary border",onChange:function(t){return h(_)(e)}},null,40,te)]),y("label",ne,[y("div",le,[y("span",oe,w(h(ke)("table.image")),1)]),j(y("select",{"onUpdate:modelValue":function(t){return e.picture=t},class:"truncate select select-warning select-sm"},[e.picture.id?(b(),p("option",re,"‚ùå")):z("",!0),y("option",ue,w(h(ke)("table.selectPicture")),1),(b(!0),p(C,null,k(h(Ce),function(e){return b(),p("option",{key:e.id,title:e.name,class:"w-full max-w-full",value:e},[y("span",ie,w(e.name),1)],8,se)}),128))],8,ae),[[S,e.picture]])]),e.separateCount?(b(),p("label",ce,[y("div",de,[y("span",fe,w(h(ke)("table.onceNumber")),1)]),y("div",{class:"flex justify-start w-full h-full",onClick:function(t){return h(O)(e)}},[e.separateCount.countList.length?(b(),p("ul",be,[(b(!0),p(C,null,k(e.separateCount.countList,function(e){return b(),p("li",{key:e.id,class:"relative flex items-center justify-center w-8 h-8 bg-slate-600/60 separated"},[y("div",{class:"flex items-center justify-center w-full h-full tooltip","data-tip":"".concat(h(ke)("tooltip.doneCount")+e.isUsedCount,"/").concat(e.count)},[y("div",{class:"absolute left-0 z-50 h-full bg-blue-300/80",style:D("width:".concat(100*e.isUsedCount/e.count,"%"))},null,4),y("span",null,w(e.count),1)],8,me)])}),128))])):(b(),p("button",ve,w(h(ke)("button.setting")),1))],8,pe)])):z("",!0),y("label",he,[y("div",ge,[y("span",xe,w(h(ke)("table.operation")),1)]),y("div",ye,[y("button",{class:"btn btn-error btn-xs",onClick:function(t){return h(r)(e)}},w(h(ke)("button.delete")),9,we)])])],2)}),128))]}),_:1},8,["modelValue"]),m(T,{"total-number":null===(n=h(i))||void 0===n?void 0:n.count,"separated-number":null===(f=h(i))||void 0===f?void 0:f.separateCount.countList,onSubmitData:h(c)},null,8,["total-number","separated-number","onSubmitData"])])}}}))}}})}();
